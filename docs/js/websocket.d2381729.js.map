{"version":3,"sources":["webpack:///./src/views/Websocket.vue?0a5a","webpack:///src/views/Websocket.vue","webpack:///./src/views/Websocket.vue?25ef","webpack:///./src/views/Websocket.vue","webpack:///./src/views/Websocket.vue?c71a"],"names":["render","_vm","this","_h","$createElement","_c","_self","_v","staticClass","attrs","directives","name","rawName","value","expression","domProps","on","$event","target","composing","text","preventDefault","addNewComment","_l","comment","key","id","_s","removeCurrentComment","staticRenderFns","data","ws","wsResponse","computed","created","WebSocket","onerror","methods","send","onmessage","event","component"],"mappings":"oHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACA,EAAG,KAAK,CAACJ,EAAIM,GAAG,+BAA+BF,EAAG,OAAO,CAACG,YAAY,aAAaC,MAAM,CAAC,OAAS,MAAM,CAACJ,EAAG,QAAQ,CAACK,WAAW,CAAC,CAACC,KAAK,QAAQC,QAAQ,UAAUC,MAAOZ,EAAQ,KAAEa,WAAW,SAASN,YAAY,QAAQC,MAAM,CAAC,SAAW,GAAG,KAAO,OAAO,YAAc,6BAA6BM,SAAS,CAAC,MAASd,EAAQ,MAAGe,GAAG,CAAC,MAAQ,SAASC,GAAWA,EAAOC,OAAOC,YAAqBlB,EAAImB,KAAKH,EAAOC,OAAOL,WAAUR,EAAG,SAAS,CAACG,YAAY,aAAaC,MAAM,CAAC,KAAO,UAAUO,GAAG,CAAC,MAAQ,SAASC,GAAgC,OAAxBA,EAAOI,iBAAwBpB,EAAIqB,cAAcL,MAAW,CAAChB,EAAIM,GAAG,8BAA8BF,EAAG,KAAK,CAACG,YAAY,gBAAgBP,EAAIsB,GAAItB,EAAY,UAAE,SAASuB,GAAS,OAAOnB,EAAG,KAAK,CAACoB,IAAID,EAAQE,GAAGlB,YAAY,gBAAgB,CAACH,EAAG,OAAO,CAACJ,EAAIM,GAAGN,EAAI0B,GAAGH,EAAQJ,SAASf,EAAG,SAAS,CAACG,YAAY,aAAaQ,GAAG,CAAC,MAAQ,SAASC,GAAQ,OAAOhB,EAAI2B,qBAAqBJ,EAAQE,OAAO,CAACzB,EAAIM,GAAG,kBAAiB,MAC5gCsB,EAAkB,G,wrBC6BtB,OACEC,KADF,WAEI,MAAO,CACLC,GAAI,KACJC,WAAY,KACZZ,KAAM,KAGVa,SAAU,EAAZ,GACA,gBACI,QAAJ,YAAM,OAAN,qBACI,SAAJ,YAAM,OAAN,yBAGEC,QAdF,WAeIhC,KAAK6B,GAAK,IAAII,UAAU,2BACxBjC,KAAK6B,GAAGK,QAAU,SAAtB,6BAEEC,QAAS,EAAX,GACA,+CADA,CAEIT,qBAFJ,SAEA,cACM1B,KAAK6B,GAAGO,KAAKZ,GACbxB,KAAK6B,GAAGQ,UAAY,SAA1B,GACYC,EAAMV,OAASJ,IACjB,EAAV,iBACU,EAAV,WAIIJ,cAXJ,WAWA,WACA,0BACMpB,KAAK6B,GAAGO,KAAKZ,GACbxB,KAAK6B,GAAGQ,UAAY,SAA1B,GACYC,EAAMV,OAASJ,IACjB,EAAV,+BACU,EAAV,cCjEmV,I,wBCQ/Ue,EAAY,eACd,EACAzC,EACA6B,GACA,EACA,KACA,WACA,MAIa,aAAAY,E,2CCnBf,yBAAsiB,EAAG,G","file":"js/websocket.d2381729.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('h1',[_vm._v(\"This is an websocket page\")]),_c('form',{staticClass:\"input-form\",attrs:{\"action\":\"#\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.text),expression:\"text\"}],staticClass:\"input\",attrs:{\"required\":\"\",\"type\":\"text\",\"placeholder\":\"Введите текст комментария\"},domProps:{\"value\":(_vm.text)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.text=$event.target.value}}}),_c('button',{staticClass:\"submit-btn\",attrs:{\"type\":\"submit\"},on:{\"click\":function($event){$event.preventDefault();return _vm.addNewComment($event)}}},[_vm._v(\" Добавить комментарий \")])]),_c('ul',{staticClass:\"comment-list\"},_vm._l((_vm.comments),function(comment){return _c('li',{key:comment.id,staticClass:\"comment-item\"},[_c('span',[_vm._v(_vm._s(comment.text))]),_c('button',{staticClass:\"remove-btn\",on:{\"click\":function($event){return _vm.removeCurrentComment(comment.id)}}},[_vm._v(\"Удалить\")])])}),0)])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <h1>This is an websocket page</h1>\n    <form action=\"#\" class=\"input-form\">\n      <input\n        required\n        type=\"text\"\n        class=\"input\"\n        placeholder=\"Введите текст комментария\"\n        v-model=\"text\">\n      <button\n        type=\"submit\"\n        class=\"submit-btn\"\n        @click.prevent=\"addNewComment\">\n        Добавить комментарий\n      </button>\n    </form>\n    <ul class=\"comment-list\">\n      <li class=\"comment-item\" v-for=\"comment in comments\" :key=\"comment.id\">\n        <span>{{comment.text}}</span>\n        <button class=\"remove-btn\" @click=\"removeCurrentComment(comment.id)\">Удалить</button>\n      </li>\n    </ul>\n  </div>\n</template>\n\n<script>\nimport { mapState, mapMutations } from 'vuex';\nimport { uniqueId } from 'lodash';\n\nexport default {\n  data() {\n    return {\n      ws: null,\n      wsResponse: null,\n      text: '',\n    };\n  },\n  computed: {\n    ...mapState({\n      comment: state => state.websocket.comment,\n      comments: state => state.websocket.comments,\n    }),\n  },\n  created() {\n    this.ws = new WebSocket('ws://echo.websocket.org');\n    this.ws.onerror = error => alert(error.message);\n  },\n  methods: {\n    ...mapMutations(['removeComment', 'addComment']),\n    removeCurrentComment(id) {\n      this.ws.send(id);\n      this.ws.onmessage = (event) => {\n        if (event.data === id) {\n          this.removeComment(id);\n          this.text = '';\n        }\n      };\n    },\n    addNewComment() {\n      const id = uniqueId();\n      this.ws.send(id);\n      this.ws.onmessage = (event) => {\n        if (event.data === id) {\n          this.addComment({ id, text: this.text });\n          this.text = '';\n        }\n      };\n    },\n  },\n};\n</script>\n\n\n<style lang=\"scss\" scoped>\n.input-form {\n  display: flex;\n  justify-content: center;\n}\n.input {\n  width: 350px;\n  height: 50px;\n  border: 2px solid #42b983;\n  border-radius: 3px;\n  font-size: 16px;\n  padding: 0 15px;\n}\n.submit-btn {\n  width: 150px;\n  min-height: 50px;\n  background-color: #42b983;\n  color: #fff;\n  border-radius: 3px;\n  font-size: 14px;\n  font-family: inherit;\n}\n\n.comment-list {\n  list-style: none;\n  flex-direction: column;\n  display: flex;\n  justify-content: center;\n}\n\n.comment-item {\n  font-size: 18px;\n  padding: 10px 5px;\n}\n\n.remove-btn {\n  width: 100px;\n  font-size: 16px;\n  background-color: firebrick;\n  color: #fff;\n  margin-left: 10px;\n  border-radius: 3px;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Websocket.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Websocket.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Websocket.vue?vue&type=template&id=757ebb90&scoped=true&\"\nimport script from \"./Websocket.vue?vue&type=script&lang=js&\"\nexport * from \"./Websocket.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Websocket.vue?vue&type=style&index=0&id=757ebb90&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"757ebb90\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Websocket.vue?vue&type=style&index=0&id=757ebb90&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Websocket.vue?vue&type=style&index=0&id=757ebb90&lang=scss&scoped=true&\""],"sourceRoot":""}